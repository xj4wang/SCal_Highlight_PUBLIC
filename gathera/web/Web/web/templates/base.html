{% load i18n static raven has_group crispy_forms_tags notifications_tags %}
{% notifications_unread as unread_count %}
<!DOCTYPE html>
<html lang="en" {% block extra_html_tag %}{% endblock %}>
  <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
      <meta name="description" content="Gathera">
      <meta name="author" content="University of Waterloo - Information Retrieval Lab">
      <title>Gathera - {% block pagetitle %}home{% endblock %}</title>
      <!-- Bootstrap core CSS -->
      <link href="{% static 'css/hical-bootstrap.min.css' %}" rel="stylesheet">
      <!-- Custom styles for Gathera -->
      <link href="{% static 'css/project.css' %}" rel="stylesheet">
      <!-- Other -->
      <link href="{% static 'css/pace.css' %}" rel="stylesheet">
      <link href="{% static 'css/font-awesome-all.css' %}" rel="stylesheet">
      <link href="{% static 'css/loadawesome.css' %}" rel="stylesheet">
      {% include "raven-config.html" %}
      <link rel="shortcut icon" href="{% static 'images/favicon.ico' %}" type="image/x-icon">
      <link rel="icon" href="{% static 'images/favicon.ico' %}" type="image/x-icon">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.js" type="application/javascript"></script>
      <script src="{% static 'js/identicon.js' %}"></script>
      <script>
        // set up options
        var IdenticonHash = "d3b0sdffd113edec49eaa6238ad5ff00";  // 15+ hex chars
        var IdenticonOptions = {
            format: 'svg'                             // use SVG instead of PNG
        };

        function createIdenticonImage(input, width, height, css){
          // create a base64 encoded SVG
          const svg = new Identicon(input+IdenticonHash, IdenticonOptions).toString();
          // write to a data URI
          if (!css){
            css = "";
          }
          document.write(`<img alt="${input}" title="${input}" width=${width} height=${height} class="${css}" src="data:image/svg+xml;base64, ${svg} ">`);
        }
      </script>


      {% block extra_head %}{% endblock %}

  </head>

  <body>
    <nav class="navbar navbar-main navbar-expand-lg navbar-light fixed-top bg-white" style="border-bottom: #fff 1px solid; transition: border-bottom 0.1s linear;">
        <div class="navbar-brand pr-4 pb-1 align-self-center">
          <a href="/"><img src="{% static 'images/logo.svg' %}" alt="gathera" class="pb-1" width="100px"></a>
          <span class="px-3 d-none d-md-inline border-sm-0 border-right"></span>
        </div>
      {% block navbar-noncollapse %}{% endblock %}
      <button class="navbar-toggler text-secondary" type="button" data-toggle="collapse" data-target="#navbars">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse d-flex flex-column flex-md-row align-items-end align-right align-self-center" id="navbars">
        {% if request.user.is_authenticated and request.user.current_session %}
        <div class="navbar-nav order-2 order-md-1 align-self-md-center">
          {% if activated_shared_session and activated_shared_session.disallow_search %}
          {% else %}
          <!-- <a class="nav-item nav-link {% if 'search' in request.resolver_match.app_names %}text-primary{% endif %}" href="{% url 'search:main' %}">Search</a> -->
          {% endif %}

          {% if activated_shared_session and activated_shared_session.disallow_CAL %}
          {% else %}
          <a class="nav-item nav-link {% if 'CAL' in request.resolver_match.app_names %}text-primary{% endif %}" href="{% url 'CAL:main' %}">Discovery</a>
          {% endif %}

          <!-- <a class="nav-item nav-link {% if 'review' in request.resolver_match.app_names %}text-primary{% endif %}" href="{% url 'review:main' %}">Review</a>
        </div> -->
        {% endif %}
        <ul class="nav navbar-nav flex-fill justify-content-center align-self-center center-text pl-5 pr-5 order-2 {%block navbar-hidesmall %}d-none d-sm-block{%endblock%}">
          {% block navbar-center %}
          <span class="navbar-text text-truncate p-0" style="max-width: 15rem;">
           {% if request.user.current_session %}{{user.current_session.topic.title}}{% elif request.user.is_authenticated %}{% endif %}
          </span>
          {% endblock %}
        </ul>

        {% block navbar-form %} {% endblock %}

        <ul class="navbar-nav pl-md-3 border-sm-0 ml-0 ml-md-4 order-4 align-self-md-center">

          <a class="nav-item nav-link"  data-toggle="modal" data-target="#helpModal" href="#">
            <h5 class="d-none d-md-inline pr-2"><i class="fas fa-question-circle" title="Help"></i></h5>
            <span class="d-md-none">Help</span>
          </a>

          <!-- <a class="nav-item nav-link" data-toggle="modal" data-target="#notificationsModal" href="#" id="notificationDetails">
            <h5 class="d-none d-md-inline"><i class="fas fa-bell" title="Notification"></i>{% if unread_count %}<span class="badge badge-notify badge-pill bg-danger text-white">{{ unread_count }}</span>{% endif %}
            </h5>
            <span class="d-md-none">Notifications</span>
          </a> -->

          {% if request.user.is_authenticated and request.user.current_session  %}
          <a class="nav-item nav-link session-details"  data-toggle="modal" data-target="#sessionModal" href="#"
               data-is-shared-session={% if not current_session_owner %}"true"{% else %}"false"{% endif %}
               data-session-id={% if user.current_session.username != user %}"{{ activated_shared_session.uuid }}"{% else %}"{{ user.current_session.uuid }}"{% endif %}
               data-session-title="{{ user.current_session.topic.title }}"
            >
            <h5 class="d-none d-md-inline pr-2"><i class="fas fa-info-circle" title="Session Information"></i></h5>
            <span class="d-md-none">Session Information</span>
          </a>
          {% endif %}


          <li class="nav-item dropdown align-self-center">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown">
              <h5 class="d-none d-md-inline pr-2"><i class="fas fa-plus" title="Create"></i></h5>
              <span class="d-md-none">Create</span>
              <i class="fas fa-caret-down"></i>
            </a>
            <div class="dropdown-menu dropdown-menu-right">

              <a class="dropdown-item align-items-center d-flex flex-row" data-toggle="modal" data-target="#createSessionModal" href="#">Create session</a>

              {% if request.user.is_authenticated and request.user.current_session and current_session_owner  %}
              <div class="dropdown-divider"></div>
              <span class="dropdown-item bg-transparent text-muted gray-text small py-0 mb-1">This session</span>
              <a class="dropdown-item align-items-center d-flex flex-row" data-toggle="modal" data-target="#shareSessionModal" href="#">Share</a>
              {% endif %}

            </div>
          </li>


          {% if request.user.is_authenticated %}
          <li class="nav-item dropdown align-self-center">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown">
              <h5 class="d-none d-md-inline pr-2"><i class="fas fa-cog" title="Settings"></i></h5>
              <span class="d-md-none">Settings</span>
              <i class="fas fa-caret-down"></i>
            </a>
            <div class="dropdown-menu dropdown-menu-right">
              <span class="dropdown-item py-0 text-muted align-items-center d-flex flex-row bg-transparent"><span>Signed in as <strong> {{ request.user.username }}</strong></span></span>
              <div class="dropdown-divider"></div>

              <a class="dropdown-item align-items-center d-flex flex-row" href="{% url 'judgment:view' %}">Judged Documents</a>
              <a class="dropdown-item align-items-center d-flex flex-row" href="{% url 'core:sessions' %}">View Sessions</a>

              <div class="dropdown-divider"></div>
              {% if request.user.is_authenticated and request.user|has_group:"practice" %}
              <a class="dropdown-item align-items-center d-flex flex-row" href="{% url 'core:practice_complete' %}"><i class="fas fa-sign-out-alt mr-3"></i> Exit practice</a>
              {% elif request.user.is_authenticated %}
              <a class="dropdown-item align-items-center d-flex flex-row" href="{% url 'account_logout'  %}"><i class="fas fa-sign-out-alt mr-3 small"></i>Sign out</a>
              {% else %}
              <a class="dropdown-item align-items-center d-flex flex-row" href="{% url 'account_login' %}"><i class="fas fa-sign-in-alt mr-3 small"></i>Sign In</a>
              {% endif %}
            </div>
          </li>
          {% else %}
          <a class="btn btn-secondary d-flex align-items-center" href="{% url 'core:practice' %}">Click here to try</a>
          {% endif %}
        </ul>
      </div>
    </nav>

    <!-- Notifications modal -->
    {% include 'modals/notification_modal.html' %}

    <!-- Help modal -->
    {% include 'modals/help_modal.html' %}

    <!-- Create session modal -->
    {% include 'modals/create_session_modal.html' %}
	
	<!-- Questions modal -->
    {% include 'modals/questions_model.html' %}

    {% if request.user.is_authenticated and request.user.current_session %}
    {% if current_session_owner or request.resolver_match.url_name == "sessions" %}
    <!-- Share session modal -->
    {% include 'modals/share_session_modal.html' %}
    {% endif %}
    {% endif %}

    {% if request.user.is_authenticated %}
    <!-- Session details modal -->
    {% include 'modals/session_details_modal.html' %}
    {% endif %}


    <div class="container-fluid">
      <div class="row">
        <main class="{%block main-class%}col-12 pt-4{%endblock%}">
          {% block messages %}
          {% include 'alert.html' %}
          {% endblock %}

          {% block main %}
          MAIN CONTENT HERE
          {% endblock %}
        </main>

        {% block extra_body %}{% endblock %}

      </div>
    </div>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="{% static 'js/jquery.mark.min.js' %}"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
    <script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')</script>

    <script>
        // initilize toasts
        $('.toast').toast()

        // Adds border-bottom to navbar when scroll
        $(window).scroll(function () {
          $('.navbar-main').toggleClass('border-bottom', $(this).scrollTop() > 1);
        })

        window.jquery_ajax = $.ajax;
        $.ajax = function (param) {
            var tmp_success_callback = param['success'];
            param['success'] = function (data, tmp, xhr) {
                if (xhr.getResponseHeader('completed') == "1" && window.location.pathname != "/completed/") {
                    window.location.href = "/completed/";
                } else
                    tmp_success_callback(data, tmp, xhr);
            };
            window.jquery_ajax(param);
        };


    window.paceOptions = {ajax: { trackMethods: ['GET', 'POST'] }};

    $('#navbars').collapse()
    $('#navbars').collapse('hide')
    // Fixes using d-flex with collapse
    $('#navbars').on('hidden.bs.collapse', function () {
      $(this).removeClass("d-flex");
    })
    $('#navbars').on('show.bs.collapse', function () {
      $(this).addClass("d-flex");
    })

    </script>

    {% if request.user.is_authenticated and request.user.current_session and current_session_owner  %}
    <script type="text/javascript" src="{% static 'admin/js/vendor/jquery/jquery.js' %}"></script>
    {{ share_session_form.media }}
    {% endif %}

    {% if request.user.is_authenticated %}
    <script>
      // Fetch notifications
      $(document).on("click", "#notificationDetails", function () {
            $("#notificationModalSpinner").removeClass("d-none");
            $("#notificationsModalError").addClass("d-none");
            $(".notification_table").addClass("d-none");
            $("#notificationModalList").empty();

            // fetch notification details
            $.ajax({
                url: '{% url 'notifications:live_unread_notification_list' %}',
                method: 'GET',
                success: function (result) {
                  if (result !== undefined && result["unread_count"] !== 0){
                    $(".notification_table").removeClass("d-none");
                    result["unread_list"].forEach(function (entry) {
                      let elm = `
                          <tr class="notification-details">
                          <td class="align-middle">
                            <span class="text-monospace text-primary small pr-2">${entry["timestamp"]}</span>
                          </td>
                          <td class="align-middle">${entry["description"]}</td>
                          <td class="text-center align-middle">
                            <div class="form-check">
                              <input class="form-check-input" type="checkbox" value="" id="defaultCheck2" disabled>
                              <label class="form-check-label" for="defaultCheck2">

                              </label>
                            </div>
                          </td>
                        </tr>
                      `;
                      $("#notificationModalList").append(elm);
                    });
                  }
                  $("#notificationModalSpinner").addClass("d-none");
                },
                error: function (result) {
                    let message = "Ops! Could not fetch notifications."
                    $("#notificationsModalError").removeClass("d-none");
                    $("#notificationsModalError").html(message);
                    $("#sessionModalSpinner").addClass("d-none");
                }
              });

        });
    </script>
    {% endif %}
	
<!-- 	{% if request.user.is_authenticated %}
    <script>
		// Jean's stuff
		var test = "can you access this?";
		
		const question_set = {t: "", q1: "", q2: "", q3: ""};
		const question = {q: "", a: "", b: "", c: "", d: "",  e: ""};
		var list_of_questions = [];
		
		//////////////////////////////////// START ////////////////////////////////////
		var q1 = Object.create(question);
		q1.q = 'What sort of origin is COVID-19 suggested to have?';
		q1.a = 'Zoonotic';
		q1.b = 'Silicotic';
		q1.c = 'Zymotic';
		q1.d = 'Posthypnotic';
		q1.e = 'Siderotic';

		var q2 = Object.create(question);
		q2.q = 'A number of arguments suggest that COVID-19 has a zoonotic origin. What species is suspected of being the “missing link” in its transmission to humans?';
		q2.a = 'Pangolins';
		q2.b = 'Rabbits';
		q2.c = 'Armadillos';
		q2.d = 'Mosquitos';
		q2.e = 'Pigs';

		var q3 = Object.create(question);
		q3.q = 'How does the H5N1 virus, also known as the “avian influenza”, differ from COVID-19?';
		q3.a = 'Avian and mammals are different';
		q3.b = 'Humans were never affected';
		q3.c = 'Coughing is not a symptom';
		q3.d = 'All of the above';
		q3.e = 'Both a and b';

		var qs = Object.create(question_set);
		qs.t = 'coronavirus origin';
		qs.q1 = q1;
		qs.q2 = q2;
		qs.q3 = q3;
		list_of_questions.push(qs);


		var q1 = Object.create(question);
		q1.q = 'Different weather and climate is most likely to affect the ________ of COVID-19.';
		q1.a = 'Transmission';
		q1.b = 'Symptoms';
		q1.c = 'Treatment';
		q1.d = 'Operation';
		q1.e = 'Placebo';

		var q2 = Object.create(question);
		q2.q = 'The transmissibility of COVID-19 seems to be strongly correlated with certain features of weather and climate. Especially with ________.';
		q2.a = 'Temperature';
		q2.b = 'Humidity';
		q2.c = 'Precipitation';
		q2.d = 'Wind speed';
		q2.e = 'Both a and b';

		var q3 = Object.create(question);
		q3.q = 'The 2 metre of social distance recommended by the Center for Disease Control and Prevention (CDC) may be insufficient in certain environmental conditions. Especially in ________.';
		q3.a = 'Low temperature and low humidity';
		q3.b = 'High temperature and low humidity';
		q3.c = 'High precipitation';
		q3.d = 'High wind speed';
		q3.e = 'High temperature and high humidity';

		var qs = Object.create(question_set);
		qs.t = 'coronavirus response to weather changes';
		qs.q1 = q1;
		qs.q2 = q2;
		qs.q3 = q3;
		list_of_questions.push(qs);


		var q1 = Object.create(question);
		q1.q = 'Which of the following(s) is/are part of the seven coronaviruses associated with diseases in humans other than SARS-CoV-2, commonly known as COVID-19?';
		q1.a = 'MERS-CoV';
		q1.b = 'NIRS-Cov';
		q1.c = 'HARS-Cov';
		q1.d = 'URA-Cov';
		q1.e = 'GBA-Cov';

		var q2 = Object.create(question);
		q2.q = 'Receiving ________ from other coronavirus outbreaks is one possible explanation for some populations experiencing milder symptoms than others.';
		q2.a = 'ADE (antibody dependent enhancement)';
		q2.b = 'ADE (adverse drug events)';
		q2.c = 'ADE (absorption-desorption equilibrium)';
		q2.d = 'ADE (after death experiences)';
		q2.e = 'None of the above';

		var q3 = Object.create(question);
		q3.q = 'Antibody-dependent enhancement (ADE) is an atypical immunological paradox commonly associated with dengue virus re-infection. Which of the following have been hypothesized to be a result(s) of receiving ADE from other coronaviruses?';
		q3.a = 'Severe clinical manifestations of SARS-CoV-2';
		q3.b = 'Milder symptoms correlated to cross protection';
		q3.c = 'Guaranteed immunity to Covid-19';
		q3.d = 'Both a and b';
		q3.e = 'None of the above';

		var qs = Object.create(question_set);
		qs.t = 'coronavirus immunity';
		qs.q1 = q1;
		qs.q2 = q2;
		qs.q3 = q3;
		list_of_questions.push(qs);


		var q1 = Object.create(question);
		q1.q = 'COVID-19 patients with severe ________ is often found to have fatal outcomes.';
		q1.a = 'Acute Kidney Injury (AKI)';
		q1.b = 'Acute Schistismus (AS)';
		q1.c = 'Acute Glycacal Injury (AGI)';
		q1.d = 'Acute Oligectasia (AO)';
		q1.e = 'Acute Pachyad Injury (API)';

		var q2 = Object.create(question);
		q2.q = 'Which of the following features are correlated with higher mortality from Covid-19?';
		q2.a = 'Being male';
		q2.b = 'Older age';
		q2.c = 'Having comorbidities';
		q2.d = 'All of the above';
		q2.e = 'Both b and c';

		var q3 = Object.create(question);
		q3.q = 'Patients with cancer are more likely to…';
		q3.a = 'Die from Covid-19';
		q3.b = 'Be asymptomatic when infected with Covid-19';
		q3.c = 'Recover from Covid-19';
		q3.d = 'Both a and b';
		q3.e = 'Both b and c';

		var qs = Object.create(question_set);
		qs.t = 'how do people die from the coronavirus';
		qs.q1 = q1;
		qs.q2 = q2;
		qs.q3 = q3;
		list_of_questions.push(qs);


		var q1 = Object.create(question);
		q1.q = 'A promising target for both biagnosis and therapeutics treatments of the new COVID-19 is the corona virus (CoV) spike (S) ________.';
		q1.a = 'Glycoprotein';
		q1.b = 'Fibronectin';
		q1.c = 'Pikachurin';
		q1.d = 'Rhodopsin';
		q1.e = 'Hemoglobin';

		var q2 = Object.create(question);
		q2.q = '________ in SARS-CoV-2 S protein have been found to bind strongly to human and bat ________ receptors.';
		q2.a = 'receptor binding domain (RBD), angiotensin-converting enzyme 2 (ACE2)';
		q2.b = 'receptor binding domain (RBD), molecular dynamics (MD)';
		q2.c = 'molecular dynamics (MD), angiotensin-converting enzyme 2 (ACE2)';
		q2.d = 'angiotensin-converting enzyme 2 (ACE2), receptor binding domain (RBD)';
		q2.e = 'None of the above';

		var q3 = Object.create(question);
		q3.q = 'SARS-CoV-2 and SARS-CoV are known to both recognize the same host cell receptor responsible for mediating infection. This means that SAR-CoV, the SARS pandemic that occurred in 2002, also …';
		q3.a = 'Has loss of olfactory senses as a symptom';
		q3.b = 'Has the same level of severity once infected';
		q3.c = 'Binds to angiotensin-converting enzyme 2 (ACE2)';
		q3.d = 'All of the above';
		q3.e = 'Both b and c';

		var qs = Object.create(question_set);
		qs.t = 'animal models of COVID-19';
		qs.q1 = q1;
		qs.q2 = q2;
		qs.q3 = q3;
		list_of_questions.push(qs);


		var q1 = Object.create(question);
		q1.q = 'Which of the following is a type of rapid testing for COVID-19?';
		q1.a = 'Antigen-based rapid detection tests';
		q1.b = 'Singlewave rapid detection tests';
		q1.c = 'Mayocarditis-linked rapid detection tests';
		q1.d = 'Brachyium rapid detection tests';
		q1.e = 'Glycole-linked rapid detection tests';

		var q2 = Object.create(question);
		q2.q = 'Using samples of nasopharyngeal swabs allows us to perform which of the following tests?';
		q2.a = 'Molecular tests';
		q2.b = 'Antigen tests';
		q2.c = 'Antibody tests';
		q2.d = 'Both a and b';
		q2.e = 'Both b and c';

		var q3 = Object.create(question);
		q3.q = 'Which tests are helpful in identifying people who are capable of donating plasma to help patients currently fighting the infection.';
		q3.a = 'Molecular tests';
		q3.b = 'Antigen tests';
		q3.c = 'Antibody tests';
		q3.d = 'Both a and b';
		q3.e = 'Both b and c';

		var qs = Object.create(question_set);
		qs.t = 'coronavirus test rapid testing';
		qs.q1 = q1;
		qs.q2 = q2;
		qs.q3 = q3;
		list_of_questions.push(qs);


		var q1 = Object.create(question);
		q1.q = 'Serological methods can be used to detect specific antibodies of ________ classes.';
		q1.a = 'IgM and IgG';
		q1.b = 'HpA and HpC';
		q1.c = 'TsG and TsB';
		q1.d = 'ArC and ArN';
		q1.e = 'CvK and CvG';

		var q2 = Object.create(question);
		q2.q = 'A positive serological test result indicates…';
		q2.a = 'Recent exposure to the suspected pathogen';
		q2.b = 'Active infection with the suspected pathogen';
		q2.c = 'Immunity to reinfection with the suspected pathogen';
		q2.d = 'Both a and c';
		q2.e = 'None of the above';

		var q3 = Object.create(question);
		q3.q = 'Why may serological tests have limited use as a diagnostic method for active COVID-19 infections?';
		q3.a = 'It detects antibodies';
		q3.b = 'Results normally takes up to a week';
		q3.c = 'It requires blood';
		q3.d = 'Both a and b';
		q3.e = 'None of the above';

		var qs = Object.create(question_set);
		qs.t = 'serological tests for coronavirus';
		qs.q1 = q1;
		qs.q2 = q2;
		qs.q3 = q3;
		list_of_questions.push(qs);


		var q1 = Object.create(question);
		q1.q = 'A possible solution for sparsity of testing kits is to use…';
		q1.a = 'Group testing';
		q1.b = 'Molecular testing';
		q1.c = 'Predictive testing';
		q1.d = 'Genetic testing';
		q1.e = 'Protoid testing';

		var q2 = Object.create(question);
		q2.q = 'Antibody tests are ________ to the under reporting of COVID-19 case since ________';
		q2.a = 'Helpful, it accounts for recovered patients';
		q2.b = 'Not helpful, it only accounts for recovered patients';
		q2.c = 'Helpful, it relies on blood samples';
		q2.d = 'Not helpful, it relies on blood samples';
		q2.e = 'Both b and d';

		var q3 = Object.create(question);
		q3.q = 'To retrospectively help catch under reported cases of COVID-19, we should collect samples of ________ to test.';
		q3.a = 'Blood';
		q3.b = 'Nasopharyngeal swab';
		q3.c = 'Oropharyngeal swab';
		q3.d = 'Both a and b';
		q3.e = 'Both b and c';

		var qs = Object.create(question_set);
		qs.t = 'coronavirus under reporting';
		qs.q1 = q1;
		qs.q2 = q2;
		qs.q3 = q3;
		list_of_questions.push(qs);


		var q1 = Object.create(question);
		q1.q = 'Which of the following are journals reporting on COVID-19 in Canada?';
		q1.a = 'Canadian Medical Association journal (CMAJ)';
		q1.b = 'Canadian Health journal (CHJ)';
		q1.c = 'Canadian Health Care journal (CHCJ)';
		q1.d = 'Canadian Open journal (COJ)';
		q1.e = 'Canadian Medicine journal (CMJ)';

		var q2 = Object.create(question);
		q2.q = 'Which of the following are computational/mathematical models used to achieve?';
		q2.a = 'Projecting demand for critical care beds during COVID-19';
		q2.b = 'Estimation of CVOID-19-induced depletion of hospital resources';
		q2.c = 'Effects of physical-distancing interventions used to slow the spread of COVID-19';
		q2.d = 'All of the above';
		q2.e = 'Both a and b';

		var q3 = Object.create(question);
		q3.q = 'Which of the following are non-pharmaceutical interventions Canadians can apply to reduce the burden on the healthcare system during the COVID-19 pandemic?';
		q3.a = 'Social distancing';
		q3.b = 'Vaccination';
		q3.c = 'Remdesivir';
		q3.d = 'All of the above';
		q3.e = 'Both a and b';

		var qs = Object.create(question_set);
		qs.t = 'coronavirus in Canada';
		qs.q1 = q1;
		qs.q2 = q2;
		qs.q3 = q3;
		list_of_questions.push(qs);


		var q1 = Object.create(question);
		q1.q = 'Rigorous social distancing has led to dramatic declines in …';
		q1.a = 'Mobility';
		q1.b = 'Confidentiality';
		q1.c = 'Bioavailability';
		q1.d = 'Monospecific';
		q1.e = 'None of the above';

		var q2 = Object.create(question);
		q2.q = 'Social distancing commonly referred to as a ________ intervention on the transmission of COVID-19.';
		q2.a = 'Non-pharmaceutical';
		q2.b = 'Parasitological';
		q2.c = 'Non-countercyclical';
		q2.d = 'Transhistorical';
		q2.e = 'Non-Neuroanatomical';

		var q3 = Object.create(question);
		q3.q = 'Examples of social distancing includes';
		q3.a = 'Wearing a mask';
		q3.b = 'Working from home';
		q3.c = 'Washing your hands';
		q3.d = 'All of the above';
		q3.e = 'Both a and b';

		var qs = Object.create(question_set);
		qs.t = 'coronavirus social distancing impact';
		qs.q1 = q1;
		qs.q2 = q2;
		qs.q3 = q3;
		list_of_questions.push(qs);


		var q1 = Object.create(question);
		q1.q = 'Which of the following methods have been used for severity risk prediction and triage of COVID-19 patients?';
		q1.a = 'Machine learning';
		q1.b = 'Lacrimitis testing';
		q1.c = 'Ectacal ranking';
		q1.d = 'Unation rapid testing';
		q1.e = 'Ostacal ranking';

		var q2 = Object.create(question);
		q2.q = 'Which of the following features is/are the best predictor(s) of COVID-19?';
		q2.a = 'Fever';
		q2.b = 'Cough';
		q2.c = 'Headache';
		q2.d = 'Sore throat';
		q2.e = 'Myalgia';

		var q3 = Object.create(question);
		q3.q = 'Which of the following are likely procedures used in triage of COVID-19 patients?';
		q3.a = 'Checking for fever';
		q3.b = 'Collecting history of travel';
		q3.c = 'Collecting a blood sample';
		q3.d = 'All of the above';
		q3.e = 'Both a and b';

		var qs = Object.create(question_set);
		qs.t = 'coronavirus hospital rationing';
		qs.q1 = q1;
		qs.q2 = q2;
		qs.q3 = q3;
		list_of_questions.push(qs);


		var q1 = Object.create(question);
		q1.q = 'Quarantine is used to control ________ exposure among people.';
		q1.a = 'Social';
		q1.b = 'Consubstantial';
		q1.c = 'Inquisitorial';
		q1.d = 'Salpingad';
		q1.e = 'Uncial';

		var q2 = Object.create(question);
		q2.q = 'Quarantine is commonly referred to as a ________ intervention on the transmission of COVID-19.';
		q2.a = 'Non-pharmaceutical';
		q2.b = 'Parasitological';
		q2.c = 'Non-countercyclical';
		q2.d = 'Transhistorical';
		q2.e = 'Non-Neuroanatomical';

		var q3 = Object.create(question);
		q3.q = 'Why is quarantining for 14 days alone not enough. (i.e. we still need to wear masks, maintain physical distancing, get tested, etc.)';
		q3.a = 'People can be asymptomatic';
		q3.b = 'Symptoms can develop after 14 days';
		q3.c = 'SEIR modeling of COVID-19 does not consider quarantine';
		q3.d = 'All of the above';
		q3.e = 'Both a and b';

		var qs = Object.create(question_set);
		qs.t = 'coronavirus quarantine';
		qs.q1 = q1;
		qs.q2 = q2;
		qs.q3 = q3;
		list_of_questions.push(qs);


		var q1 = Object.create(question);
		q1.q = 'Which of the following(s) is/are potential transmission routes?';
		q1.a = 'Faecal-oral transmission';
		q1.b = 'Facies-nasal transmission';
		q1.c = 'Pyrostaxis transmission';
		q1.d = 'Morphic-prosoposis transmission';
		q1.e = 'Dynamectomy transmission';

		var q2 = Object.create(question);
		q2.q = 'Which of the following are confirmed methods of transmission of COVID-19?';
		q2.a = 'Direct contact transmission';
		q2.b = 'Airborne water droplets (aerosol) transmission';
		q2.c = 'Faecal-oral (including waterborne) transmission';
		q2.d = 'Both a and b';
		q2.e = 'Both b and c';

		var q3 = Object.create(question);
		q3.q = 'Patients can have positive faecal tests even after having negative nasopharyngeal swabs. This means that…';
		q3.a = 'All patients can expect to have gastrointestinal symptoms in early stages of their infection';
		q3.b = 'Currently, there are more confirmed cases of waterborne transmission than aerosol transmission';
		q3.c = 'Wastewater surveillance of SARS-CoV-2 can be an effective tool in early detection of outbreak and determination of COVID-19 prevalence within a population';
		q3.d = 'All of the above';
		q3.e = 'Both a and c';

		var qs = Object.create(question_set);
		qs.t = 'how does coronavirus spread';
		qs.q1 = q1;
		qs.q2 = q2;
		qs.q3 = q3;
		list_of_questions.push(qs);


		var q1 = Object.create(question);
		q1.q = 'Reconstruction of infection events, including that of super-spreading events, falls into the study of…';
		q1.a = 'epidemiology';
		q1.b = 'semeiology';
		q1.c = 'soteriology';
		q1.d = 'apiology';
		q1.e = 'trachology';

		var q2 = Object.create(question);
		q2.q = 'Which of the following are most commonly used to infer the presence or absence of super-spreading events during the early phases of these outbreaks?';
		q2.a = 'Reproductive number R(0)';
		q2.b = 'Dispersion factor (k)';
		q2.c = 'Probability of death (P)';
		q2.d = 'Both a and b';
		q2.e = 'Both b and c';

		var q3 = Object.create(question);
		q3.q = 'If MERS had an estimated k of 0.2 and SARS-CoV-2 has an estimated k of 0.08, we can deduce that…';
		q3.a = 'Super spreaders are more prominent in SARS-CoV-2 than MERS';
		q3.b = 'Super spreaders are more prominent in MERS than SARS-CoV-2';
		q3.c = 'Super spreaders played a key role in the early stages of both events';
		q3.d = 'Both a and c';
		q3.e = 'Both b and c';

		var qs = Object.create(question_set);
		qs.t = 'coronavirus super spreaders';
		qs.q1 = q1;
		qs.q2 = q2;
		qs.q3 = q3;
		list_of_questions.push(qs);


		var q1 = Object.create(question);
		q1.q = 'Common place(s) for Covid-19 virus survival outside of the body is/are in…';
		q1.a = 'saliva droplets';
		q1.b = 'hair shedding';
		q1.c = 'skin shedding';
		q1.d = 'Both a and b';
		q1.e = 'Both a and c';

		var q2 = Object.create(question);
		q2.q = 'What are some environmental factors which affect how long SARS-CoV-2 can survive on common touch surfaces outside the body?';
		q2.a = 'Temperature';
		q2.b = 'Humidity';
		q2.c = 'Surface texture';
		q2.d = 'All of the above';
		q2.e = 'Both a and b';

		var q3 = Object.create(question);
		q3.q = 'Reason(s) why SARS-CoV-2 and other animal CoVs have remarkably short persistence on copper and latex surfaces compared to stainless steel, plastic, and glass is/are due to their difference in…';
		q3.a = 'Porosity';
		q3.b = 'Thermal conductivity';
		q3.c = 'Density';
		q3.d = 'All of the above';
		q3.e = 'Both a and b';

		var qs = Object.create(question_set);
		qs.t = 'coronavirus outside body';
		qs.q1 = q1;
		qs.q2 = q2;
		qs.q3 = q3;
		list_of_questions.push(qs);


		var q1 = Object.create(question);
		q1.q = 'Common place(s) for Covid-19 virus survival outside of the body is/are in…';
		q1.a = 'saliva droplets';
		q1.b = 'hair shedding';
		q1.c = 'skin shedding';
		q1.d = 'Both a and b';
		q1.e = 'Both a and c';

		var q2 = Object.create(question);
		q2.q = 'What are some environmental factors which affect how long SARS-CoV-2 can survive on common touch surfaces outside the body?';
		q2.a = 'Temperature';
		q2.b = 'Humidity';
		q2.c = 'Surface texture';
		q2.d = 'All of the above';
		q2.e = 'Both a and b';

		var q3 = Object.create(question);
		q3.q = 'Reason(s) why SARS-CoV-2 and other animal CoVs have remarkably short persistence on copper and latex surfaces compared to stainless steel, plastic, and glass is/are due to their difference in…';
		q3.a = 'Porosity';
		q3.b = 'Thermal conductivity';
		q3.c = 'Density';
		q3.d = 'All of the above';
		q3.e = 'Both a and b';

		var qs = Object.create(question_set);
		qs.t = 'how long does coronavirus survive on surfaces';
		qs.q1 = q1;
		qs.q2 = q2;
		qs.q3 = q3;
		list_of_questions.push(qs);


		var q1 = Object.create(question);
		q1.q = 'A common site(s) used for clinical trial registration is…';
		q1.a = 'ClinicalTrials.gov';
		q1.b = 'CovidTrials.gov';
		q1.c = 'cdc.gov/clinical-trials';
		q1.d = 'biomedcentral.com/clinical-trials';
		q1.e = 'medicaltrials.com';

		var q2 = Object.create(question);
		q2.q = 'Which of the following are drug repurposing clinical trials?';
		q2.a = 'Hydroxychloroquine';
		q2.b = 'Radiotherapy';
		q2.c = 'Remdesivir';
		q2.d = 'Plasma';
		q2.e = 'Both a and c';

		var q3 = Object.create(question);
		q3.q = 'Which of the following are reasons which makes Chloroquine a good candidate for drug repurposing clinical trials against COVID-19.';
		q3.a = 'Like hydroxychloroquine, chloroquine also affect endosomal function';
		q3.b = 'Unlike hydroxychloroquine, chloroquine does not block autophagosome-lysosome fusion';
		q3.c = 'Unlike hydroxychloroquine, chloroquine is a broad-spectrum antibiotic';
		q3.d = 'Both a and b';
		q3.e = 'None of the above';

		var qs = Object.create(question_set);
		qs.t = 'coronavirus clinical trials';
		qs.q1 = q1;
		qs.q2 = q2;
		qs.q3 = q3;
		list_of_questions.push(qs);


		var q1 = Object.create(question);
		q1.q = 'Which of the following is a possible risk of prolonged mask wearing?';
		q1.a = 'Skin damage';
		q1.b = 'Ciliphilia';
		q1.c = 'Cytopexy';
		q1.d = 'Orostenosis';
		q1.e = 'Carbon dioxide poisoning';

		var q2 = Object.create(question);
		q2.q = 'Which of the following are helpful in slowing the spread of COVID-19 in normal everyday settings?';
		q2.a = 'Surgical grade N95 Masks';
		q2.b = 'Other surgical Masks';
		q2.c = 'Cloth Masks';
		q2.d = 'All of the above';
		q2.e = 'Both a and b';

		var q3 = Object.create(question);
		q3.q = 'Are surgical grade N95 masks capable of completely filtering all SARS-CoV-2 virions?';
		q3.a = 'No, its filtration efficiency is for sub-300nm particles is not 100%';
		q3.b = 'Yes, its filtration efficiency is for sub-300nm particles is 100%';
		q3.c = 'Yes, virions smaller than 300nm particles are not infectious for humans';
		q3.d = 'Yes, if worn properly';
		q3.e = 'No, since SARS-CoV-2 virions are oil-based';

		var qs = Object.create(question_set);
		qs.t = 'masks prevent coronavirus';
		qs.q1 = q1;
		qs.q2 = q2;
		qs.q3 = q3;
		list_of_questions.push(qs);


		var q1 = Object.create(question);
		q1.q = 'Which of the following are ingredients frequently used in alcohol hand sanitizers?';
		q1.a = 'ethanol';
		q1.b = 'methanol';
		q1.c = 'hydrogen monoxide';
		q1.d = 'sodium oxide';
		q1.e = 'propanol';

		var q2 = Object.create(question);
		q2.q = 'Which of the following is the recommended alcohol concentration in alcohol hand sanitizers to be effective against COVID-19?';
		q2.a = '30% or more';
		q2.b = '40% or more';
		q2.c = '50% or more';
		q2.d = '60% or more';
		q2.e = 'None of the above';

		var q3 = Object.create(question);
		q3.q = 'Hand sanitizer ________ many microbes, making it ________ effective than washing your hands with soap and water at reducing the transmission of COVID-19.';
		q3.a = 'inactivates, less';
		q3.b = 'removes, less';
		q3.c = 'eliminates, more';
		q3.d = 'removes, more';
		q3.e = 'inactivates, more';

		var qs = Object.create(question_set);
		qs.t = 'what alcohol sanitizer kills coronavirus';
		qs.q1 = q1;
		qs.q2 = q2;
		qs.q3 = q3;
		list_of_questions.push(qs);


		var q1 = Object.create(question);
		q1.q = 'Which of the following is angiotensin converting enzyme 2 (ACE2) a regulator of?';
		q1.a = 'Renin-angiotensin system';
		q1.b = 'Pyad-papilliarty system';
		q1.c = 'Corics-oligoid system';
		q1.d = 'Enteresophageal system';
		q1.e = 'Myringiatry-variceal system';

		var q2 = Object.create(question);
		q2.q = 'Which of the following are treated using angiotensin-converting enzyme inhibitors?';
		q2.a = 'hypertension';
		q2.b = 'diabetes';
		q2.c = 'sars-cov-2';
		q2.d = 'Both a and b';
		q2.e = 'Both a and c';

		var q3 = Object.create(question);
		q3.q = 'Why are patients taking Angiotensin-converting enzyme inhibitors (ACE) potentially at an increased risk for COVID-19?';
		q3.a = 'ACE2 enzyme is the SARS-CoV-2 receptor';
		q3.b = 'It increases oxygen demand from the heart';
		q3.c = 'It increases the production of angiotensin II';
		q3.d = 'Both a and b';
		q3.e = 'Both a and c';

		var qs = Object.create(question_set);
		qs.t = 'coronavirus and ACE inhibitors';
		qs.q1 = q1;
		qs.q2 = q2;
		qs.q3 = q3;
		list_of_questions.push(qs);
		
		//////////////////////////////////// END ////////////////////////////////////
		
		$(document).on("click", ".session-details", function () {
             var session_title = $(this).data('session-title');
             var session_id = $(this).data('session-id');

             $("#questionsModalTitle").html( session_title );
			 
			 var cur_q1_text = "NOT FOUND";
			 var cur_q1a_text = "NOT FOUND";
			 var cur_q1b_text = "NOT FOUND";
			 var cur_q1c_text = "NOT FOUND";
			 var cur_q1d_text = "NOT FOUND";
			 var cur_q1e_text = "NOT FOUND";
			 
			 var cur_q2_text = "NOT FOUND";
			 var cur_q2a_text = "NOT FOUND";
			 var cur_q2b_text = "NOT FOUND";
			 var cur_q2c_text = "NOT FOUND";
			 var cur_q2d_text = "NOT FOUND";
			 var cur_q2e_text = "NOT FOUND";
			 
			 var cur_q3_text = "NOT FOUND";
			 var cur_q3a_text = "NOT FOUND";
			 var cur_q3b_text = "NOT FOUND";
			 var cur_q3c_text = "NOT FOUND";
			 var cur_q3d_text = "NOT FOUND";
			 var cur_q3e_text = "NOT FOUND";
			 
			 for (i=0; i < list_of_questions.length; i++) {
				if (list_of_questions[i].t.toLowerCase() == session_title.toLowerCase()) {
					cur_q1_text = list_of_questions[i].q1.q;
					cur_q1a_text = list_of_questions[i].q1.a;
					cur_q1b_text = list_of_questions[i].q1.b;
					cur_q1c_text = list_of_questions[i].q1.c;
					cur_q1d_text = list_of_questions[i].q1.d;
					cur_q1e_text = list_of_questions[i].q1.e;
					
					cur_q2_text = list_of_questions[i].q2.q;
					cur_q2a_text = list_of_questions[i].q2.a;
					cur_q2b_text = list_of_questions[i].q2.b;
					cur_q2c_text = list_of_questions[i].q2.c;
					cur_q2d_text = list_of_questions[i].q2.d;
					cur_q2e_text = list_of_questions[i].q2.e;
					
					cur_q3_text = list_of_questions[i].q3.q;
					cur_q3a_text = list_of_questions[i].q3.a;
					cur_q3b_text = list_of_questions[i].q3.b;
					cur_q3c_text = list_of_questions[i].q3.c;
					cur_q3d_text = list_of_questions[i].q3.d;
					cur_q3e_text = list_of_questions[i].q3.e;
					break;
				}
			}
			 
			 $("#q1_text").html( cur_q1_text );
			 $("#q1a_text").html( cur_q1a_text );
			 $("#q1b_text").html( cur_q1b_text );
			 $("#q1c_text").html( cur_q1c_text );
			 $("#q1d_text").html( cur_q1d_text );
			 $("#q1e_text").html( cur_q1e_text );
			 
			 $("#q2_text").html( cur_q2_text );
			 $("#q2a_text").html( cur_q2a_text );
			 $("#q2b_text").html( cur_q2b_text );
			 $("#q2c_text").html( cur_q2c_text );
			 $("#q2d_text").html( cur_q2d_text );
			 $("#q2e_text").html( cur_q2e_text );
			 
			 $("#q3_text").html( cur_q3_text );
			 $("#q3a_text").html( cur_q3a_text );
			 $("#q3b_text").html( cur_q3b_text );
			 $("#q3c_text").html( cur_q3c_text );
			 $("#q3d_text").html( cur_q3d_text );
			 $("#q3e_text").html( cur_q3e_text );

            
		});
	</script>
	{% endif %} -->

    {% if request.user.is_authenticated %}
    <script>
        function templateSharedToUser(shared_by, shared_with, shared_on, shared_session_uuid){
          let filledTemplate = `
          <div class="row mb-4 flex-row">
            <div class="col-6 border-0">
              <h6 class="text-truncate text-secondary">${shared_with}</h6>
              <p class="text-muted m-0" style="font-size: 65%;">Shared by ${shared_by} on ${shared_on}</p>
            </div>
            <div class="col align-self-center text-right">
              <button type="submit"
                      data-session-id="${shared_session_uuid}"
                      name="revoke_sessionid"
                      value="${shared_session_uuid}"
                      class="btn btn-sm btn-outline-danger">Revoke
              </button>
            </div>
          </div>
          `
          return filledTemplate;
        }
        function templateSessionActions(sessionid, title, isActive, owner){
            let disable_val = ""
            if (isActive){
              disable_val = "disabled"
            }

            if (!owner){
              return `
                  <input type="hidden" name="is_shared_session" value="true">
                  <button type="submit" data-session-id="${sessionid}"
                          data-session-title="${title}"
                          name="activate_sessionid"
                          data-is-shared-session="${!owner}"
                          value="${sessionid}"
                          class="btn btn-block mx-1 btn-outline-secondary" ${disable_val}>Activate
                  </button>
              `
            }

            let filledTemplate = `
              <div class="btn-group-vertical">
                <div class="btn-group">
                  <button data-session-id="${sessionid}"
                          data-session-title="${title}"
                          name="activate_sessionid"
                          data-is-shared-session="${!owner}"
                          value="${sessionid}"
                          class="btn btn-sm btn-outline-secondary" ${disable_val}>Activate
                  </button>
                  <button href="#" data-toggle="modal" data-target="#shareSessionModal"
                       data-dismiss="modal"
                       data-session-id="${sessionid}"
                       data-session-title="${title}"
                       data-is-shared-session="false"
                       class="btn btn-sm btn-outline-secondary share-modal">Share
                  </button>
                </div>
                <button href="#" data-toggle="modal" data-target="#deleteSessionModal"
                   data-dismiss="modal"
                   data-session-id="${sessionid}"
                   data-session-title="${title}"
                   data-is-shared-session="false"
                   class="btn btn-sm btn-outline-danger delete-modal">Delete
                </button>
              </div>
            `;
            return filledTemplate;
        }

        var myPieChart = null;
        $(document).on("click", ".session-details", function () {
             var session_title = $(this).data('session-title');
             var session_id = $(this).data('session-id');
             var is_shared_session = $(this).data('is-shared-session')

             $("#sessionModalTitle").html( session_title );

             $("#sessionModalSpinner").removeClass("d-none");
             $("#sessionModalDetails").addClass("d-none");
             $("#sessionModalError").addClass("d-none");
             $("#sessionDetailsTabs").addClass("d-none");
             $("#sharedWithTab").addClass("d-none");

             // fetch session details
              $.ajax({
                url: '{% url 'core:get_session_details' %}?uuid=' +session_id +'&is_shared_session=' + is_shared_session,
                method: 'GET',
                success: function (result) {

                  let session = result
                  let is_active_session = session["is_active_session"]
                  // session["total_highlyRelevant"]
                  // session["total_nonrelevant"]
                  // session["total_relevant"]
                  // session["total_judged"]
                  let owner = session['owner']
                  let shared_with_obj = session['shared_with']
                  let title = session['topic_title']
                  let number = session['topic_number']
                  let show_full_document_content = session['show_full_document_content']
                  let effort = session['effort']
                  if (effort <= 0){
                    effort = "No max";
                  }

                  if (!owner){
                    $("#sharedWithTab").addClass("d-none");
                  }else{
                    $("#sharedWithTab").removeClass("d-none");
                    // Update shared with list
                    $("#sessionSharedWithList").html("");
                    if (shared_with_obj.length === 0){
                      $("#sharedWithTab").addClass("d-none");
                    }
                    for (let i = 0; i < shared_with_obj.length; i++){
                      const shared_with_obj_i = shared_with_obj[i];
                      $("#sessionSharedWithList").append(templateSharedToUser(
                              shared_with_obj_i["shared_by"],
                              shared_with_obj_i["shared_with"],
                              shared_with_obj_i["shared_on"],
                              shared_with_obj_i["uuid"],
                      ))
                    }
                  }

                  $("#sessionDetailsTabs").removeClass("d-none");

                  $("#sessionActionsTab").html(templateSessionActions(session_id, title, is_active_session, owner))

                  $("#session_created_at").html(session['created_at']);
                  $("#session_description").html(session['topic_description']);
                  $("#session_narrative").html(session['topic_narrative']);
                  $("#session_seed_query").html(session['topic_seed_query']);
                  $("#session_strategy").html(session['strategy']);
                  $("#session_effort").html(effort);

                  // Update piechart
                  var ctx = $("#piechart");
                  var data = {
                          labels: [
                              "Highly {% if main_judging_criteria_name %}{{ main_judging_criteria_name }}{% else %}Relevant{% endif %}",
                              "{% if main_judging_criteria_name %}{{ main_judging_criteria_name }}{% else %}Relevant{% endif %}",
                              "Non {% if main_judging_criteria_name %}{{ main_judging_criteria_name }}{% else %}Relevant{% endif %}"
                          ],
                          datasets: [
                              {
                                  data: [
                                      session["total_highlyRelevant"],
                                      session["total_relevant"],
                                      session["total_nonrelevant"]],
                                  backgroundColor: [
                                      "#84c273",
                                      "#c6fab8",
                                      "#a5a5a5"
                                  ],
                                  hoverBackgroundColor: [
                                      "#84c273",
                                      "#c6fab8",
                                      "#a5a5a5"
                                  ]
                              }]
                      };

                  // Remove prev initilized pie chart
                  if(myPieChart !== null){
                    myPieChart.destroy();
                  }

                  myPieChart = new Chart(ctx, {
                      type: 'pie',
                      data: data,
                      options: {
                          legend: {
                              display: true,
                              position: 'right'
                          }
                      }
                  });

                  $("#sessionModalSpinner").addClass("d-none");
                  $("#sessionModalDetails").removeClass("d-none");

                },
                error: function (result) {
                    let message = result["responseJSON"]["message"]
                    $("#sessionModalError").removeClass("d-none");
                    $("#sessionModalError").html(message);
                    $("#sessionModalSpinner").addClass("d-none");
                }
              });

             return false;
        });

        $('#sessionModal').on('hidden.bs.modal', function (e) {
          // reset active tab once modal is closed.
          $('#detailsTab').tab('show')
        })

        $(document).on("click", ".delete-modal", function () {
             var session_title = $(this).data('session-title');
             var session_id = $(this).data('session-id');
             $("#deleteSessionModalTitle").html( session_title );
             $("#deleteSessionModalDeleteButton").val( session_id );
             return false;
        });

        $(document).on("click", ".share-modal", function () {
             var session_title = $(this).data('session-title');
             var session_id = $(this).data('session-id');
             $("#shareSessionModalTitle").html( session_title );
             $("#shareSessionModalShareButton").val( session_id );
             return false;
        });

        // dynamically show "show_full_document_content" field based on strategy field value
        $('#id_topic-strategy').on('change', function() {
          let newval = this.value;
          if (newval.includes("para")){
            $("#topic-show_full_document_content").removeClass("d-none");
          }else{
            $("#topic-show_full_document_content").addClass("d-none");
          }
        });
        $('#id_predefined-strategy').on('change', function() {
          let newval = this.value;
          if (newval.includes("para")){
            $("#predefined-show_full_document_content").removeClass("d-none");
          }else{
            $("#predefined-show_full_document_content").addClass("d-none");
          }
        });
    </script>
    {% endif %}


    {% block extra_scripts %}{% endblock %}

    <script src="{% static 'js/pace.min.js' %}"></script>
  </body>
</html>
